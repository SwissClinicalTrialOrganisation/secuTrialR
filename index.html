<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Handling of Data from the Clinical Data Management System secuTrial • secuTrialR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Handling of Data from the Clinical Data Management System secuTrial">
<meta property="og:description" content="Seamless and standardized interaction with data
    exported from the clinical data management system (CDMS)
    secuTrial&lt;https://www.secutrial.com&gt;.
    The primary data export the package works with is a standard non-rectangular export.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">secuTrialR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/secuTrialR-package-vignette.html">secuTrialR - a walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="secutrialr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#secutrialr" class="anchor"></a>secuTrialR</h1></div>

<p>An R package to handle data from the clinical data management system (CDMS) <a href="https://www.secutrial.com/en/">secuTrial</a>.</p>
<div id="installing-from-github-with-devtools" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-from-github-with-devtools" class="anchor"></a>Installing from github with devtools</h2>
<p>Please note that <code>R versions &gt;= 3.5</code> should be used to run <code>secuTrialR</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"SwissClinicalTrialOrganisation/secuTrialR"</span>)</span></code></pre></div>
</div>
<div id="recommended-export-options" class="section level2">
<h2 class="hasAnchor">
<a href="#recommended-export-options" class="anchor"></a>Recommended export options</h2>
<p>While the package strives to allow loading of as many types of secuTrial data exports as possible, there are certain export options which are less likely to cause issues. If possible it is suggested to export data which adheres to a suggested option set. Thus, we suggest to work with exports which: * are <strong>zipped</strong> * are <strong>English</strong> * have <strong>reference values</strong> stored <strong>in a separate table</strong> * contain <strong>Add-IDs</strong>, <strong>centre information</strong>, <strong>structure information</strong>, <strong>form status</strong>, <strong>project setup</strong> * do <strong>NOT</strong> have the <strong>meta data duplicated</strong> into all tables * are <strong>UTF-8</strong> encoded * are <strong>“CSV format”</strong> or <strong>“CSV format for MS Excel”</strong> * do <strong>NOT</strong> contain form <strong>data of hidden fields</strong></p>
<p>If you use <code><a href="reference/read_secuTrial.html">read_secuTrial()</a></code> to read your export then it will inform you regarding deviations.</p>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h2>
<p>An extensive applied manual/vignette is available <a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/blob/master/vignettes/secuTrialR-package-vignette.pdf">here</a> and probably the best place to get started.</p>
<p>Load the package</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">library</span>(secuTrialR)</span></code></pre></div>
<p>Load a dataset</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>export_location &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"sT_exports"</span>, <span class="st">"lnames"</span>,</span>
<span id="cb3-2"><a href="#cb3-2"></a>                               <span class="st">"s_export_CSV-xls_CTU05_long_ref_miss_en_utf8.zip"</span>,</span>
<span id="cb3-3"><a href="#cb3-3"></a>                               <span class="dt">package =</span> <span class="st">"secuTrialR"</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a>ctu05 &lt;-<span class="st"> </span><span class="kw">read_secuTrial</span>(export_location)</span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">## Read export successfully.</span></span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">## The following export options deviate from the suggested specifications:</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">## Data from hidden fields is part of the export.</span></span></code></pre></div>
<p>This will load all sheets from the export into an object of class <code>secuTrialdata</code>, which is basically a list. It will always contain <code>export_details</code> (which are parsed from the HTML ExportOptions file that secuTrial generates). By default, it will also contain all other files in the dataset. secuTrialR automatically strips file names of dates. The new file names can be seen via <code>ctu05$export_options$data_names</code>. The function also adds <a href="#variable-labels">labels to variables</a> and data.frames, converts <a href="#prepare-factors">categorical variables to <code>factor</code>s</a> and ensures that <a href="#prepare-dates">dates are <code>Date</code>s and date-times are <code>POSIXct</code></a>. <code>read_secuTrial</code> is a wrapper for the functions described below, so it is possible to achieve more flexibility by using the individual functions (if necessary). Individual tables can be extracted from the <code>ctu05</code> object via <code>tab &lt;- ctu05$tab</code>, where <code>tab</code> is the table of interest.</p>
<details><p><summary>Wrapped functions</summary></p>
<div id="load-the-dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#load-the-dataset" class="anchor"></a>Load the dataset</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># prepare path to example export</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>export_location &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"sT_exports"</span>, <span class="st">"BMD"</span>,</span>
<span id="cb4-3"><a href="#cb4-3"></a>                               <span class="st">"s_export_CSV-xls_BMD_short_en_utf8.zip"</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>                               <span class="dt">package =</span> <span class="st">"secuTrialR"</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># load all export data</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>bmd_export &lt;-<span class="st"> </span><span class="kw">read_secuTrial_raw</span>(<span class="dt">data_dir =</span> export_location)</span>
<span id="cb4-7"><a href="#cb4-7"></a></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co"># load a second dataset</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>export_location &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"sT_exports"</span>, <span class="st">"lnames"</span>,</span>
<span id="cb4-10"><a href="#cb4-10"></a>                               <span class="st">"s_export_CSV-xls_CTU05_long_ref_miss_en_utf8.zip"</span>,</span>
<span id="cb4-11"><a href="#cb4-11"></a>                               <span class="dt">package =</span> <span class="st">"secuTrialR"</span>)</span>
<span id="cb4-12"><a href="#cb4-12"></a>ctu05_raw &lt;-<span class="st"> </span><span class="kw">read_secuTrial_raw</span>(export_location)</span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co"># View names of the bmd_export object</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="kw">names</span>(bmd_export)</span>
<span id="cb4-16"><a href="#cb4-16"></a></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">##  [1] "export_options" "fs"             "cn"             "ctr"           </span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">##  [5] "is"             "qs"             "qac"            "vp"            </span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">##  [9] "vpfs"           "atcn"           "atcvp"          "cts"           </span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">## [13] "bmd"            "atbmd"</span></span></code></pre></div>
<p><code>read_secuTrial_raw</code> returns an object of class <code>secuTrialdata</code>, which is basically a list. It will always contain <code>export_details</code> (which are parsed from the HTML ExportOptions file that secuTrial generates). By default, it will also contain all other files in the dataset. secuTrialR automatically strips file names of dates. The new file names can be seen via <code>bmd_export$export_options$data_names</code>. <!-- DEDICATED ACCESSOR FUNCTION FOR DATA_NAMES? might already be implemented in the print method --></p>
<p><code>bmd_export</code> is a list, with class <code>secuTrialdata</code>. To prevent it from printing all data to the console, a special print method returns some useful information about the objects within <code>bmd_export</code> instead. The information returned includes the original file name in the datafile, it’s name in the <code>secuTrialdata</code> object, together with the number of rows and columns and a column indicating whether the object is metadata or not:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>bmd_export</span>
<span id="cb5-2"><a href="#cb5-2"></a></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">## secuTrial data imported from:</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">## /Users/runner/work/_temp/Library/secuTrialR/extdata/sT_exports/BMD/s_export_CSV-</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">## xls_BMD_short_en_utf8.zip </span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">##  table nrow ncol  meta original_name</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">##     vp    1   10  TRUE        vp.xls</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">##   vpfs    1    2  TRUE      vpfs.xls</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">##     fs    1    7  TRUE        fs.xls</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">##     qs    1    7  TRUE        qs.xls</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">##     is    3    8  TRUE        is.xls</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">##    ctr    1    3  TRUE       ctr.xls</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">##     cn  113   13  TRUE        cn.xls</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">##   atcn    0    6  TRUE      atcn.xls</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">##  atcvp    0   11  TRUE     atcvp.xls</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">##    qac    0   10  TRUE       qac.xls</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">##    cts    0    8  TRUE       cts.xls</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">##    bmd  504   27 FALSE       bmd.xls</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">##  atbmd    0   28 FALSE     atbmd.xls</span></span></code></pre></div>
<p>Individual tables can be extracted from the <code>bmd_export</code> object via <code>tab &lt;- bmd_export$tab</code>, where <code>tab</code> is the table of interest. <!-- accessor function? --></p>
</div>
<div id="variable-labels" class="section level4">
<h4 class="hasAnchor">
<a href="#variable-labels" class="anchor"></a>Variable labels</h4>
<p>For creating tables, it is often useful to have access to variable labels. secuTrialR supports two main methods for handling them - a named list, or via variable attributes. The list approach works as follows.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>labs &lt;-<span class="st"> </span><span class="kw">labels_secuTrial</span>(bmd_export)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co"># query the list with the variable name of interest</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>labs[[<span class="st">"age"</span>]]</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">## [1] "Age"</span></span></code></pre></div>
<p>The attribute based approach adds labels as an attribute to a variable, which can then be accessed via <code><a href="reference/labels_secuTrial.html">label(var)</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>labelled &lt;-<span class="st"> </span><span class="kw">label_secuTrial</span>(bmd_export)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="kw">label</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age)</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">## [1] "Age"</span></span></code></pre></div>
<p>Labels can be added to new variables or changed via</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">label</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age) &lt;-<span class="st"> "Age (years)"</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">label</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">## [1] "Age (years)"</span></span></code></pre></div>
<p>Where units have been defined in the SecuTrial database, they can be accessed or changed analogously (here, age had no unit assigned, but we can add one).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">units</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age)</span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">## NULL</span></span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">units</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age) &lt;-<span class="st"> "years"</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw">units</span>(labelled<span class="op">$</span>bmd<span class="op">$</span>age)</span>
<span id="cb9-7"><a href="#cb9-7"></a></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">## [1] "years"</span></span></code></pre></div>
<p>There is a drawback to the attribute based approach - labels will not be propagated if variables are derived and may be lost if variables are edited.</p>
<p>Currently, <code>label_secuTrial</code> should be used prior to <code>dates_secuTrial</code> or <code>factorize_secuTrial</code> so that labels and units are propagated to factor and date variables.</p>
</div>
<div id="prepare-factors" class="section level4">
<h4 class="hasAnchor">
<a href="#prepare-factors" class="anchor"></a>Prepare factors</h4>
<p>It is often useful to have categorical variables as factors (R knows how to handle factors). secuTrialR can prepare factors easily.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>factors &lt;-<span class="st"> </span><span class="kw">factorize_secuTrial</span>(ctu05_raw)</span></code></pre></div>
<p>This functions loops through each table of the dataset, creating new factor variables where necessary. The new variables are the same as the original but with <code>.factor</code> appended (i.e. a new variable called <code>sex.factor</code> would be added to the relevant form).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># original variable</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="kw">str</span>(factors<span class="op">$</span>ctu05baseline<span class="op">$</span>gender)</span>
<span id="cb11-3"><a href="#cb11-3"></a></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">##  int [1:17] 1 NA NA 2 1 2 1 NA NA 1 ...</span></span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># factor</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="kw">str</span>(factors<span class="op">$</span>ctu05baseline<span class="op">$</span>gender.factor)</span>
<span id="cb11-8"><a href="#cb11-8"></a></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">##  Factor w/ 2 levels "male","female": 1 NA NA 2 1 2 1 NA NA 1 ...</span></span>
<span id="cb11-10"><a href="#cb11-10"></a></span>
<span id="cb11-11"><a href="#cb11-11"></a><span class="co"># cross tabulation</span></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="kw">table</span>(<span class="dt">original =</span> factors<span class="op">$</span>ctu05baseline<span class="op">$</span>gender, <span class="dt">factor =</span> factors<span class="op">$</span>ctu05baseline<span class="op">$</span>gender.factor)</span>
<span id="cb11-13"><a href="#cb11-13"></a></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">##         factor</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="co">## original male female</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">##        1    5      0</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">##        2    0      5</span></span></code></pre></div>
</div>
<div id="prepare-dates" class="section level4">
<h4 class="hasAnchor">
<a href="#prepare-dates" class="anchor"></a>Prepare dates</h4>
<p>Date(time)s are a very common data type. They cannot be easily used though in their export format. This is also easily rectified in secuTrialR:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>dates &lt;-<span class="st"> </span><span class="kw">dates_secuTrial</span>(ctu05_raw)</span></code></pre></div>
<p>Date variables are converted to <code>Date</code> class, and datetimes are converted to <code>POSIXct</code> class. Rather than overwriting the original variable, new variables are added with the new class. This is a safetly mechanism in case <code>NA</code>s are accidentally created.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>dates<span class="op">$</span>ctu05baseline[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">7</span>), <span class="kw">c</span>(<span class="st">"aspirin_start"</span>, <span class="st">"aspirin_start.date"</span>,</span>
<span id="cb13-2"><a href="#cb13-2"></a>                              <span class="st">"hiv_date"</span>, <span class="st">"hiv_date.datetime"</span>)]</span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">##   aspirin_start aspirin_start.date     hiv_date   hiv_date.datetime</span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">## 1            NA               &lt;NA&gt; 201903052356 2019-03-05 23:56:00</span></span>
<span id="cb13-6"><a href="#cb13-6"></a><span class="co">## 7      20060301         2006-03-01           NA                &lt;NA&gt;</span></span></code></pre></div>
<p>secuTrial exports containing date variables sometimes include incomplete dates. e.g. the day or the month may be missing. During date conversion (i.e. <code><a href="reference/dates_secuTrial.html">dates_secuTrial()</a></code>) <code>secuTrialR</code> currently creates <code>NA</code>s from such incomplete date entries.</p>
<p>Incomplete dates are not approximated to exact dates, since this can lead to false conclusions and biases. Users are, however, informed about this behaviour with a <code><a href="https://rdrr.io/r/base/warning.html">warning()</a></code>. Subsequent approximation of incomplete dates can be manually performed.</p>
<p>Recommended literature on incomplete dates/date imputation:<br><a href="https://www.cambridge.org/core/services/aop-cambridge-core/content/view/F50311F9FFAB56176CDDC9FFBF66F655/S1041610202008025a.pdf/imputation_of_missing_dates_of_death_or_institutionalization_for_timetoevent_analyses_in_the_canadian_study_of_health_and_aging.pdf">Dubois and Hebert 2001</a><br><a href="https://www.lexjansen.com/phuse/2006/po/PO11.pdf">Bowman 2006</a></p>
</div>
<div id="recommended-approach-if-not-using-read_secutrial" class="section level4">
<h4 class="hasAnchor">
<a href="#recommended-approach-if-not-using-read_secutrial" class="anchor"></a>Recommended approach if not using <code>read_secuTrial</code>
</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>f &lt;-<span class="st"> "PATH_TO_FILE"</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>d &lt;-<span class="st"> </span><span class="kw">read_secuTrial_raw</span>(f)</span>
<span id="cb14-3"><a href="#cb14-3"></a>l &lt;-<span class="st"> </span><span class="kw">label_secuTrial</span>(d)</span>
<span id="cb14-4"><a href="#cb14-4"></a>fa &lt;-<span class="st"> </span><span class="kw">factorize_secuTrial</span>(l)</span>
<span id="cb14-5"><a href="#cb14-5"></a>dat &lt;-<span class="st"> </span><span class="kw">dates_secuTrial</span>(fa)</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co"># or, if you like pipes</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="kw">library</span>(magrittr)</span>
<span id="cb14-9"><a href="#cb14-9"></a>f &lt;-<span class="st"> "PATH_TO_FILE"</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>d &lt;-<span class="st"> </span><span class="kw">read_secuTrial_raw</span>(f)</span>
<span id="cb14-11"><a href="#cb14-11"></a>dat &lt;-<span class="st"> </span>d <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="st">  </span><span class="kw">label_secuTrial</span>() <span class="op">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="st">  </span><span class="kw">factorize_secuTrial</span>() <span class="op">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="st">  </span><span class="kw">dates_secuTrial</span>()</span></code></pre></div>

</div>
<div id="exploratory-helpers" class="section level3">
<h3 class="hasAnchor">
<a href="#exploratory-helpers" class="anchor"></a>Exploratory helpers</h3>
<p><code>secuTrialR</code> has a couple of functions to help get to grips with a secuTrial data export. They are intended to be used in an exploratory manner only.</p>
<div id="asdataframe" class="section level4">
<h4 class="hasAnchor">
<a href="#asdataframe" class="anchor"></a>as.data.frame</h4>
<p>Working with a list can be tiresome so <code>secuTrialR</code> provides a <code>as.data.frame</code> method to save the <code>data.frames</code> in the list to an environment of your choice. As a demonstration, we’ll create a new environment (<code>env</code>) and create the <code>data.frame</code>s in there. In practice, using <code>.GlobalEnv</code> would probably be more useful.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>env &lt;-<span class="st"> </span><span class="kw">new.env</span>()</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">ls</span>(env)</span>
<span id="cb15-3"><a href="#cb15-3"></a></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">## character(0)</span></span>
<span id="cb15-5"><a href="#cb15-5"></a></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="kw">names</span>(ctu05)</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">##  [1] "export_options"          "forms"                  </span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">##  [3] "casenodes"               "centres"                </span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">##  [5] "items"                   "questions"              </span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">##  [7] "queries"                 "visitplan"              </span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">##  [9] "visitplanforms"          "atcasenodes"            </span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">## [11] "atcasevisitplans"        "comments"               </span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">## [13] "miv"                     "cl"                     </span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">## [15] "atmiv"                   "ctu05baseline"          </span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">## [17] "atmnpctu05baseline"      "ctu05outcome"           </span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">## [19] "atmnpctu05outcome"       "ctu05treatment"         </span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">## [21] "atmnpctu05treatment"     "ctu05allmedi"           </span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">## [23] "atmnpctu05allmedi"       "ctu05studyterminat"     </span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">## [25] "atmnpctu05studyterminat" "ctu05ae"                </span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">## [27] "atmnpctu05ae"            "ctu05sae"               </span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">## [29] "atmnpctu05sae"           "emnpctu05surgeries"     </span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">## [31] "atemnpctu05surgeries"    "atadverseevents"</span></span>
<span id="cb15-24"><a href="#cb15-24"></a></span>
<span id="cb15-25"><a href="#cb15-25"></a><span class="kw">as.data.frame</span>(ctu05, <span class="dt">envir =</span> env)</span>
<span id="cb15-26"><a href="#cb15-26"></a><span class="kw">ls</span>(env)</span>
<span id="cb15-27"><a href="#cb15-27"></a></span>
<span id="cb15-28"><a href="#cb15-28"></a><span class="co">##  [1] "atadverseevents"         "atemnpctu05surgeries"   </span></span>
<span id="cb15-29"><a href="#cb15-29"></a><span class="co">##  [3] "atmiv"                   "atmnpctu05ae"           </span></span>
<span id="cb15-30"><a href="#cb15-30"></a><span class="co">##  [5] "atmnpctu05allmedi"       "atmnpctu05baseline"     </span></span>
<span id="cb15-31"><a href="#cb15-31"></a><span class="co">##  [7] "atmnpctu05outcome"       "atmnpctu05sae"          </span></span>
<span id="cb15-32"><a href="#cb15-32"></a><span class="co">##  [9] "atmnpctu05studyterminat" "atmnpctu05treatment"    </span></span>
<span id="cb15-33"><a href="#cb15-33"></a><span class="co">## [11] "ctu05ae"                 "ctu05allmedi"           </span></span>
<span id="cb15-34"><a href="#cb15-34"></a><span class="co">## [13] "ctu05baseline"           "ctu05outcome"           </span></span>
<span id="cb15-35"><a href="#cb15-35"></a><span class="co">## [15] "ctu05sae"                "ctu05studyterminat"     </span></span>
<span id="cb15-36"><a href="#cb15-36"></a><span class="co">## [17] "ctu05treatment"          "emnpctu05surgeries"</span></span></code></pre></div>
<p>There are also options for selecting specific forms (option <code>data.frames</code>), changing names based on regex (options <code>regex</code> and <code>rep</code>) and specifying whether metadata objects should be returned (option <code>meta</code>).</p>
</div>
<div id="recruitment-over-time" class="section level4">
<h4 class="hasAnchor">
<a href="#recruitment-over-time" class="anchor"></a>Recruitment over time</h4>
<p>Recruitment is an important cornerstone for every clinical trial. <code>secuTrialR</code> allows for straigt forward visualizion of recuitment over time for a given export file.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># show plot</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co"># note that there is no line for Universitätsspital </span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co"># Basel because only one participant is registered for this centre</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="kw">plot_recruitment</span>(ctu05, <span class="dt">cex =</span> <span class="fl">1.5</span>, <span class="dt">rm_regex =</span> <span class="st">"</span><span class="ch">\\</span><span class="st">(.*</span><span class="ch">\\</span><span class="st">)$"</span>)</span></code></pre></div>
<p><img src="README_files/figure-markdown_strict/unnamed-chunk-16-1.png"></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># return the plot data</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw">plot_recruitment</span>(ctu05, <span class="dt">return_data =</span> <span class="ot">TRUE</span>)</span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">## [[1]]</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">##          date centre_id pat_count                      centre_name</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">## 11 2018-05-01       441         1 Universitätsspital Basel (RPACK)</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">## 1  2019-04-01       462         2           Charité Berlin (RPACK)</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">## 2  2019-04-02       462         3           Charité Berlin (RPACK)</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">## 3  2019-04-03       462         4           Charité Berlin (RPACK)</span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">## 4  2019-04-04       462         5           Charité Berlin (RPACK)</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">## 5  2019-04-05       462         6           Charité Berlin (RPACK)</span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">## 6  2019-04-11       461         7         Inselspital Bern (RPACK)</span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">## 7  2019-04-12       461         8         Inselspital Bern (RPACK)</span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">## 8  2019-04-13       461         9         Inselspital Bern (RPACK)</span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">## 9  2019-04-14       461        10         Inselspital Bern (RPACK)</span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">## 10 2019-04-15       461        11         Inselspital Bern (RPACK)</span></span>
<span id="cb17-17"><a href="#cb17-17"></a><span class="co">## </span></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co">## [[2]]</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="co">##         date centre_id pat_count            centre_name</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="co">## 1 2019-04-01       462         1 Charité Berlin (RPACK)</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="co">## 2 2019-04-02       462         2 Charité Berlin (RPACK)</span></span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="co">## 3 2019-04-03       462         3 Charité Berlin (RPACK)</span></span>
<span id="cb17-23"><a href="#cb17-23"></a><span class="co">## 4 2019-04-04       462         4 Charité Berlin (RPACK)</span></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="co">## 5 2019-04-05       462         5 Charité Berlin (RPACK)</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="co">## </span></span>
<span id="cb17-26"><a href="#cb17-26"></a><span class="co">## [[3]]</span></span>
<span id="cb17-27"><a href="#cb17-27"></a><span class="co">##          date centre_id pat_count              centre_name</span></span>
<span id="cb17-28"><a href="#cb17-28"></a><span class="co">## 6  2019-04-11       461         1 Inselspital Bern (RPACK)</span></span>
<span id="cb17-29"><a href="#cb17-29"></a><span class="co">## 7  2019-04-12       461         2 Inselspital Bern (RPACK)</span></span>
<span id="cb17-30"><a href="#cb17-30"></a><span class="co">## 8  2019-04-13       461         3 Inselspital Bern (RPACK)</span></span>
<span id="cb17-31"><a href="#cb17-31"></a><span class="co">## 9  2019-04-14       461         4 Inselspital Bern (RPACK)</span></span>
<span id="cb17-32"><a href="#cb17-32"></a><span class="co">## 10 2019-04-15       461         5 Inselspital Bern (RPACK)</span></span>
<span id="cb17-33"><a href="#cb17-33"></a><span class="co">## </span></span>
<span id="cb17-34"><a href="#cb17-34"></a><span class="co">## [[4]]</span></span>
<span id="cb17-35"><a href="#cb17-35"></a><span class="co">##          date centre_id pat_count                      centre_name</span></span>
<span id="cb17-36"><a href="#cb17-36"></a><span class="co">## 11 2018-05-01       441         1 Universitätsspital Basel (RPACK)</span></span></code></pre></div>
<p>Furthermore, recruitment per year and center can be returned.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">annual_recruitment</span>(ctu05, <span class="dt">rm_regex =</span> <span class="st">"</span><span class="ch">\\</span><span class="st">(.*</span><span class="ch">\\</span><span class="st">)$"</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">##                     Center Total 2018 2019</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">## 1                      All    11    1   10</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co">## 2           Charité Berlin     5    0    5</span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">## 3         Inselspital Bern     5    0    5</span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co">## 4 Universitätsspital Basel     1    1    0</span></span></code></pre></div>
</div>
<div id="form-status-summary-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#form-status-summary-statistics" class="anchor"></a>Form status summary statistics</h4>
<p>If you are not sure about how complete the data in you export is, it may be useful to get a quick overview of how well the forms have been filled.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>count_summary &lt;-<span class="st"> </span><span class="kw">form_status_summary</span>(ctu05)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">tail</span>(count_summary)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co">##             form_name partly_filled completely_filled empty with_warnings</span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">## 5        ctu05allmedi             1                16     0             0</span></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co">## 6       ctu05baseline             3                14     0             0</span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co">## 7        ctu05outcome             1                12     0             0</span></span>
<span id="cb19-8"><a href="#cb19-8"></a><span class="co">## 8            ctu05sae             0                 2     0             0</span></span>
<span id="cb19-9"><a href="#cb19-9"></a><span class="co">## 9  ctu05studyterminat             0                10     0             0</span></span>
<span id="cb19-10"><a href="#cb19-10"></a><span class="co">## 10     ctu05treatment             0                11     0             0</span></span>
<span id="cb19-11"><a href="#cb19-11"></a><span class="co">##    with_errors partly_filled.percent completely_filled.percent empty.percent</span></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co">## 5            0            0.05882353                 0.9411765             0</span></span>
<span id="cb19-13"><a href="#cb19-13"></a><span class="co">## 6            0            0.17647059                 0.8235294             0</span></span>
<span id="cb19-14"><a href="#cb19-14"></a><span class="co">## 7            0            0.07692308                 0.9230769             0</span></span>
<span id="cb19-15"><a href="#cb19-15"></a><span class="co">## 8            0            0.00000000                 1.0000000             0</span></span>
<span id="cb19-16"><a href="#cb19-16"></a><span class="co">## 9            0            0.00000000                 1.0000000             0</span></span>
<span id="cb19-17"><a href="#cb19-17"></a><span class="co">## 10           0            0.00000000                 1.0000000             0</span></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co">##    with_warnings.percent with_errors.percent form_count</span></span>
<span id="cb19-19"><a href="#cb19-19"></a><span class="co">## 5                      0                   0         17</span></span>
<span id="cb19-20"><a href="#cb19-20"></a><span class="co">## 6                      0                   0         17</span></span>
<span id="cb19-21"><a href="#cb19-21"></a><span class="co">## 7                      0                   0         13</span></span>
<span id="cb19-22"><a href="#cb19-22"></a><span class="co">## 8                      0                   0          2</span></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co">## 9                      0                   0         10</span></span>
<span id="cb19-24"><a href="#cb19-24"></a><span class="co">## 10                     0                   0         11</span></span></code></pre></div>
<p>As you can see, the majority of forms has been completeley filled. None of the forms were saved empty, with warnings or with errors. For a more participant id centered statistic you can perform the following.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">form_status_counts</span>(ctu05)</span></code></pre></div>
<p>This will give you a count based overview per participant id and form. Please note that both <code>form_status_summary</code> and <code>form_status_counts</code> only work with saved forms since unsaved form data is not available in secuTrial exports.</p>
</div>
<div id="visit-plan" class="section level4">
<h4 class="hasAnchor">
<a href="#visit-plan" class="anchor"></a>Visit plan</h4>
<p>secuTrialR can provide a depiction of the visit structure, although only where the visit plan is fixed:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>vs &lt;-<span class="st"> </span><span class="kw">visit_structure</span>(ctu05)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="kw">plot</span>(vs)</span></code></pre></div>
<!-- PLOT METHOD DIRECTLY FOR secuTrialdata objects? -->
</div>
<div id="linking-different-forms" class="section level4">
<h4 class="hasAnchor">
<a href="#linking-different-forms" class="anchor"></a>Linking different forms</h4>
<p>Linkages amongst forms can be explored with the <code>links_secuTrial</code> function. This relies on the <code>igraph</code> package to create a network. It is possible to interact with the network, e.g. move nodes around in order to read the labels better. The device ID is returned to the console, but can be ignored. Forms are plotted in deep yellow, variables in light blue.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">links_secuTrial</span>(bmd_export)</span></code></pre></div>
<p><img src="inst/extdata/graphics/map.png"><!-- Figure has to be generated outside of the Rmd file - resize the window and select view/"fit to screen", export it to a PDF and then convert it to a PNG --></p>
</div>
<div id="sampling-random-participants" class="section level4">
<h4 class="hasAnchor">
<a href="#sampling-random-participants" class="anchor"></a>Sampling random participants</h4>
<p>During study monitoring it is common practice to check random participants from a study database. These participants should be retrieved in a reproducible fashion. The below function allows this for a loaded secuTrial data export.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># retrieve at least 25 percent of participants recorded after March 18th 2019 </span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="co"># from the centres "Inselspital Bern" and "Charité Berlin"</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">return_random_participants</span>(ctu05, <span class="dt">percent =</span> <span class="fl">0.25</span>, <span class="dt">seed =</span> <span class="dv">1337</span>, <span class="dt">date =</span> <span class="st">"2019-03-18"</span>,</span>
<span id="cb23-4"><a href="#cb23-4"></a>                           <span class="dt">centres =</span> <span class="kw">c</span>(<span class="st">"Inselspital Bern (RPACK)"</span>, <span class="st">"Charité Berlin (RPACK)"</span>))</span>
<span id="cb23-5"><a href="#cb23-5"></a></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="co">## $participants</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co">##          mnpaid                   centre mnpvisstartdate</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="co">## 2 RPACK-INS-012 Inselspital Bern (RPACK)      2019-04-12</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="co">## 4 RPACK-INS-014 Inselspital Bern (RPACK)      2019-04-14</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co">## 5 RPACK-CBE-005   Charité Berlin (RPACK)      2019-04-05</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="co">## 3 RPACK-CBE-003   Charité Berlin (RPACK)      2019-04-03</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="co">## </span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co">## $rng_config</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="co">## [1] "Mersenne-Twister" "Inversion"        "Rejection"</span></span></code></pre></div>
</div>
</div>
</details>
</div>
<div id="for-contributors" class="section level2">
<h2 class="hasAnchor">
<a href="#for-contributors" class="anchor"></a>For contributors</h2>
<div id="testing-with-devtools" class="section level3">
<h3 class="hasAnchor">
<a href="#testing-with-devtools" class="anchor"></a>Testing with devtools</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># run tests</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>devtools<span class="op">::</span><span class="kw">test</span>(<span class="st">"secuTrialR"</span>)</span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="co"># spell check -&gt; will contain some technical terms beyond the below list which is fine</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>ignore_words &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"AdminTool"</span>, <span class="st">"allforms"</span>, <span class="st">"casenodes"</span>, <span class="st">"CDMS"</span>, <span class="st">"codebook"</span>,</span>
<span id="cb24-5"><a href="#cb24-5"></a>                  <span class="st">"codebooks"</span>, <span class="st">"datetime"</span> ,<span class="st">"dir"</span> ,<span class="st">"Hmisc"</span> ,<span class="st">"igraph"</span>,</span>
<span id="cb24-6"><a href="#cb24-6"></a>                  <span class="st">"labelled"</span>, <span class="st">"mnp"</span>, <span class="st">"savedforms"</span>, <span class="st">"secutrial"</span>, <span class="st">"secuTrial"</span>, </span>
<span id="cb24-7"><a href="#cb24-7"></a>                  <span class="st">"secuTrialdata"</span>, <span class="st">"tcltk"</span>, <span class="st">"tibble"</span>)</span>
<span id="cb24-8"><a href="#cb24-8"></a>devtools<span class="op">::</span><span class="kw">spell_check</span>(<span class="st">"secuTrialR"</span>, <span class="dt">ignore =</span> ignore_words)</span></code></pre></div>
</div>
<div id="linting-with-lintr" class="section level3">
<h3 class="hasAnchor">
<a href="#linting-with-lintr" class="anchor"></a>Linting with lintr</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># lint the package -&gt; should be clean</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="kw">library</span>(lintr)</span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="kw">lint_package</span>(<span class="st">"secuTrialR"</span>, <span class="dt">linters =</span> <span class="kw">with_defaults</span>(<span class="dt">camel_case_linter =</span> <span class="ot">NULL</span>,</span>
<span id="cb25-4"><a href="#cb25-4"></a>                                                   <span class="dt">object_usage_linter =</span> <span class="ot">NULL</span>,</span>
<span id="cb25-5"><a href="#cb25-5"></a>                                                   <span class="kw">line_length_linter</span>(<span class="dv">125</span>)))</span></code></pre></div>
</div>
<div id="building-the-vignette" class="section level3">
<h3 class="hasAnchor">
<a href="#building-the-vignette" class="anchor"></a>Building the vignette</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">library</span>(rmarkdown)</span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="kw">render</span>(<span class="st">"vignettes/secuTrialR-package-vignette.Rmd"</span>,</span>
<span id="cb26-3"><a href="#cb26-3"></a>       <span class="dt">output_format=</span><span class="kw">c</span>(<span class="st">"pdf_document"</span>))</span></code></pre></div>
</div>
<div id="generating-the-readme-file" class="section level3">
<h3 class="hasAnchor">
<a href="#generating-the-readme-file" class="anchor"></a>Generating the README file</h3>
<p>The README file is automatically generated on GitHub via a GitHub action.</p>
</div>
<div id="handling-dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#handling-dependencies" class="anchor"></a>Handling dependencies</h3>
<p>Dependencies to other R packages are to be declared in the <code>DESCRIPTION</code> file under <code>Imports:</code> and in the specific <code>roxygen2</code> documentation of the functions relying on the dependency. It is suggested to be as explicit as possible. i.e. Just import functions that are needed and not entire packages.</p>
<p>Example to import <code>str_match</code> <code>str_length</code> <code>str_wrap</code> from the <code>stringr</code> package (see <a href="R/read_secuTrial_raw.R">read_secuTrial_raw.R</a>):</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co">#' @importFrom stringr str_match str_length str_wrap</span></span></code></pre></div>
</div>
<div id="preparing-a-release-on-cran" class="section level3">
<h3 class="hasAnchor">
<a href="#preparing-a-release-on-cran" class="anchor"></a>Preparing a release on CRAN</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># build the package archive</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>R CMD build secuTrialR</span>
<span id="cb28-3"><a href="#cb28-3"></a><span class="co"># check the archive (should return "Status: OK", no WARNINGs, no NOTEs)</span></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="co"># in this example for version 0.9.0</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>R CMD check secuTrialR_<span class="dv">0</span>.<span class="dv">9</span>.<span class="fl">0.</span>tar.gz</span></code></pre></div>
</div>
<div id="versioning-and-releases" class="section level3">
<h3 class="hasAnchor">
<a href="#versioning-and-releases" class="anchor"></a>Versioning and releases</h3>
<p>The version number is made up of three digits. The first digit is reserved for major releases which may break backwards compatibility. The second and third digits are used for medium and minor changes respectively. Versions released on CRAN will be tagged and saved as releases on GitHub. The version released on CRAN is regarded as the stable version while the master branch on GitHub is regarded as the current development version.</p>
<div id="release-checklist" class="section level4">
<h4 class="hasAnchor">
<a href="#release-checklist" class="anchor"></a>Release checklist</h4>
<p>Compile/Update: * README.Rmd * vignette * pkgdown page * NEWS.md</p>
</div>
</div>
<div id="guidelines-for-contributors" class="section level3">
<h3 class="hasAnchor">
<a href="#guidelines-for-contributors" class="anchor"></a>Guidelines for contributors</h3>
<p>Requests for new features and bug fixes should first be documented as an <a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/issues">Issue</a> on GitHub. Subsequently, in order to contribute to this R package you should fork the main repository. After you have made your changes please run the <a href="README.md#testing-with-devtools">tests</a> and <a href="README.md#linting-with-lintr">lint</a> your code as indicated above. Please also increment the version number and recompile the <code>README.md</code> to increment the dev-version badge (requires installing the package after editing the <code>DESCRIPTION</code> file). If all tests pass and linting confirms that your coding style conforms you can send a pull request (PR). Changes should also be mentioned in the <code>NEWS</code> file. The PR should have a description to help the reviewer understand what has been added/changed. New functionalities must be thoroughly documented, have examples and should be accompanied by at least one <a href="tests/testthat/">test</a> to ensure long term robustness. The PR will only be reviewed if all travis checks are successful. The person sending the PR should not be the one merging it.</p>
<p>A depiction of the core functionalities for loading can be found <a href="inst/extdata/graphics/secuTrialR.png">here</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=secuTrialR">https://​cloud.r-project.org/​package=secuTrialR</a>
</li>
<li>Browse source code at <br><a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/">https://​github.com/​SwissClinicalTrialOrganisation/​secuTrialR/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/issues">https://​github.com/​SwissClinicalTrialOrganisation/​secuTrialR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Patrick R. Wright <br><small class="roles"> Maintainer, author, copyright holder </small>  </li>
<li>Alan G. Haynes <br><small class="roles"> Author, copyright holder </small>  </li>
<li>Milica Markovic <br><small class="roles"> Author, copyright holder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR"><img src="https://img.shields.io/badge/dev%20version-1.0.7-blue.svg"></a></li>
<li><a href="https://cran.r-project.org/package=secuTrialR"><img src="https://www.r-pkg.org/badges/version/secuTrialR?color=green"></a></li>
<li><a href="https://ci.appveyor.com/project/SwissClinicalTrialOrganisation/secuTrialR"><img src="https://ci.appveyor.com/api/projects/status/github/SwissClinicalTrialOrganisation/secuTrialR?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://travis-ci.com/github/SwissClinicalTrialOrganisation/secuTrialR"><img src="https://api.travis-ci.com/SwissClinicalTrialOrganisation/secuTrialR.svg?branch=master" alt="travis"></a></li>
<li><a href="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/actions"><img src="https://github.com/SwissClinicalTrialOrganisation/secuTrialR/workflows/R-CMD-check/badge.svg" alt="Actions Status"></a></li>
<li><a href="https://codecov.io/github/SwissClinicalTrialOrganisation/secuTrialR"><img src="https://codecov.io/github/SwissClinicalTrialOrganisation/secuTrialR/branch/master/graphs/badge.svg" alt="codecov"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Patrick R. Wright, Alan G. Haynes, Milica Markovic.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
